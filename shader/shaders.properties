# Wispy Shaders V1.4.3
# Based on Mellow Shaders by TheCMK
# Performance optimizations by l_aggy

oldLighting=false
vignette=false
underwaterOverlay=false

#ifdef ROUND_SUN
sun=off
moon=off
#endif

particles.ordering=mixed
texture.deferred.noisetex=/lib/cloud_noise+normal.png
texture.gbuffers.noisetex=/lib/cloud_noise+normal.png

# ===== PERFORMANCE PROFILES =====
profile.ULTRA_PERFORMANCE = BLOOM=false SSAO=false MOTION_BLUR=false FILM_GRAIN=false BORDER_FOG=false WAVY_PLANTS=false UNDERWATER_DISTORTION=false VIGNETTE=false ATM_FOG_STRENGTH=0.10
profile.PERFORMANCE = !BLOOM !SSAO !MOTION_BLUR WAVY_PLANTS UNDERWATER_DISTORTION !VIGNETTE ATM_FOG_STRENGTH=0.10
profile.BALANCED = !BLOOM !SSAO WAVY_PLANTS UNDERWATER_DISTORTION !VIGNETTE ATM_FOG_STRENGTH=0.20
profile.QUALITY = BLOOM SSAO WAVY_PLANTS !VIGNETTE ATM_FOG_STRENGTH=0.20
profile.ULTRA_QUALITY = BLOOM SSAO WAVY_PLANTS !VIGNETTE ATM_FOG_STRENGTH=0.20

# ===== PROGRAM TOGGLES =====
program.world0/composite2.enabled=BLOOM
program.world0/composite3.enabled=BLOOM
program.world0/composite4.enabled=BLOOM
program.world0/composite5.enabled=BLOOM
program.world0/composite6.enabled=BLOOM
program.world0/composite7.enabled=BLOOM
program.world-1/composite2.enabled=BLOOM
program.world-1/composite3.enabled=BLOOM
program.world-1/composite4.enabled=BLOOM
program.world-1/composite5.enabled=BLOOM
program.world-1/composite6.enabled=BLOOM
program.world-1/composite7.enabled=BLOOM
program.world1/composite2.enabled=BLOOM
program.world1/composite3.enabled=BLOOM
program.world1/composite4.enabled=BLOOM
program.world1/composite5.enabled=BLOOM
program.world1/composite6.enabled=BLOOM
program.world1/composite7.enabled=BLOOM
alphaTest.gbuffers_skybasic=false
alphaTest.gbuffers_skytextured=false
alphaTest.gbuffers_clouds=GREATER 0.005
blend.composite5=ONE ONE ONE ONE
blend.composite6=ONE ONE ONE ONE
dhShadow.enabled=false

# ===== MENU STRUCTURE =====
screen = <profile> [COLORS_AND_LIGHTING] [ATMOSPHERE] [EFFECTS] [POST_PROCESSING] [ADVANCED]
screen.COLORS_AND_LIGHTING = EXPOSURE SATURATION VIBRANCE CONTRAST COLOR_TEMPERATURE COLOR_TINT TONEMAP_OPERATOR MIN_LIGHT_AMOUNT LM_FALLOFF_CURVE [LIGHTING_ENHANCEMENTS] [AMBIENT_STRENGTH]
screen.LIGHTING_ENHANCEMENTS = DIRECTIONAL_LIGHTMAP DYNAMIC_HANDLIGHT SOFTEN_SHADOWS SHADOW_SOFTNESS
screen.AMBIENT_STRENGTH = SUNRISE_AMBIENT NOON_AMBIENT SUNSET_AMBIENT NIGHT_AMBIENT

screen.ATMOSPHERE = ATMOSPHERIC_FOG ATM_FOG_STRENGTH BORDER_FOG HORIZON_FOG_COLOR HORIZON_FOG_STRENGTH STAR_SIZE STAR_STRENGTH SUNSET_HORIZON_BOOST SUNSET_BOOST_STRENGTH RAIN_SKY_DESATURATION RAIN_SKY_DARKENING ROUND_SUN sunPathRotation MOON_PHASE_INFLUENCE WATER_FOG_STRENGTH

screen.EFFECTS = [PLANT_ANIMATION] [DISTORTION_FX] [GAMEPLAY_FX] [DIMENSION_FX] [CEL_SHADING_SETTINGS]
screen.PLANT_ANIMATION = WAVY_PLANTS WAVE_AMPLITUDE WAVE_SPEED WAVE_SIZE WAVE_LEAVES
screen.DISTORTION_FX = UNDERWATER_DISTORTION DISTORTION_STRENGTH LAVA_DISTORTION LAVA_DISTORTION_STRENGTH NETHER_HEAT_DISTORTION NETHER_DISTORTION_STRENGTH
screen.GAMEPLAY_FX = FROST_EFFECT FROST_STRENGTH
screen.DIMENSION_FX = NETHER_AMBIENT_PULSE NETHER_PULSE_SPEED NETHER_PULSE_STRENGTH END_VOID_FOG END_FOG_DENSITY
screen.CEL_SHADING_SETTINGS = CEL_SHADING CEL_OUTLINE_THICKNESS CEL_OUTLINE_DEPTH_THRESHOLD CEL_OUTLINE_NORMAL_THRESHOLD CEL_OUTLINE_R CEL_OUTLINE_G CEL_OUTLINE_B CEL_OUTLINE_TRANSPARENCY

screen.POST_PROCESSING = BLOOM SSAO [BLOOM_SETTINGS] [SSAO_SETTINGS] [ANTI_ALIASING] [CAMERA_EFFECTS] [SHARPENING]
screen.BLOOM_SETTINGS = BLOOM_STRENGTH BLOOM_CURVE
screen.SSAO_SETTINGS = SSAO_STRENGTH SSAO_SCALE
screen.ANTI_ALIASING = TAA_MODE TAA_BLEND_FACTOR TAA_OFFCENTER_REJECTION
screen.CAMERA_EFFECTS = MOTION_BLUR MOTION_BLUR_STRENGTH FILM_GRAIN FILM_GRAIN_STRENGTH VIGNETTE VIGNETTE_STRENGTH
screen.SHARPENING = IMAGE_SHARPENING SHARPENING

screen.ADVANCED = [DISTANT_HORIZONS] [DEBUG]
screen.DISTANT_HORIZONS = DH_NOISE DH_CUTOFF DH_NOISE_SIZE
screen.DEBUG = DEBUG_SHOW_BUFFER

# ===== SLIDERS =====
sliders = EXPOSURE SATURATION VIBRANCE CONTRAST COLOR_TEMPERATURE COLOR_TINT \
          BLOOM_STRENGTH BLOOM_CURVE CEL_OUTLINE_THICKNESS CEL_OUTLINE_DEPTH_THRESHOLD CEL_OUTLINE_NORMAL_THRESHOLD \
          CEL_OUTLINE_R CEL_OUTLINE_G CEL_OUTLINE_B CEL_OUTLINE_TRANSPARENCY STAR_SIZE STAR_STRENGTH MIN_LIGHT_AMOUNT \
          ATM_FOG_STRENGTH WAVE_AMPLITUDE WAVE_SPEED WAVE_SIZE SSAO_STRENGTH SSAO_SCALE \
          MOTION_BLUR_STRENGTH FILM_GRAIN_STRENGTH VIGNETTE_STRENGTH \
          SUNRISE_AMBIENT NOON_AMBIENT SUNSET_AMBIENT NIGHT_AMBIENT \
          RAIN_SKY_DESATURATION RAIN_SKY_DARKENING TAA_BLEND_FACTOR TAA_OFFCENTER_REJECTION \
          DH_CUTOFF DH_NOISE_SIZE ENCHANT_GLINT_OPACITY SHARPENING \
          DISTORTION_STRENGTH LAVA_DISTORTION_STRENGTH NETHER_DISTORTION_STRENGTH \
          SHADOW_SOFTNESS HURT_VIGNETTE_STRENGTH FROST_STRENGTH \
          NIGHT_VISION_R NIGHT_VISION_G NIGHT_VISION_B \
          NETHER_PULSE_SPEED NETHER_PULSE_STRENGTH END_FOG_DENSITY \
          HORIZON_FOG_STRENGTH SUNSET_BOOST_STRENGTH WATER_FOG_STRENGTH \

# ===== UNIFORMS & LOGIC =====
uniform.float.timeAngle=worldTime/24000.0
variable.float.d=timeAngle-0.25
variable.float.e=0.5-cos(d*3.1415)/2.0
variable.float.timeThing=(d*2.0+e)/3.0
uniform.float.sunAngleAtHome=if(timeThing < 0.75, timeThing+0.25, timeThing-0.75)
uniform.float.nightStrength=min(abs(sin(timeAngle*2*pi))*2, 1)*floor(worldTime/12000)
uniform.float.dayStrength=min(abs(sin(timeAngle*2*pi))*2, 1)*(1-floor(worldTime/12000))
uniform.float.sunsetStrength=(1-nightStrength-dayStrength)*floor((worldTime/8000)%2)
uniform.float.sunriseStrength=(1-nightStrength-dayStrength)*(1-ceil(sunsetStrength))
uniform.vec2.resolution=vec2(viewWidth, viewHeight)
uniform.vec2.resolutionInv=vec2(1.0/viewWidth, 1.0/viewHeight)
variable.float.sunOrMoonPosx=if(sunAngleAtHome < 0.5, sunPosition.x, moonPosition.x)
variable.float.sunOrMoonPosy=if(sunAngleAtHome < 0.5, sunPosition.y, moonPosition.y)
variable.float.sunOrMoonPosz=if(sunAngleAtHome < 0.5, sunPosition.z, moonPosition.z)
variable.float.sunL=1/sqrt(sunPosition.x*sunPosition.x+sunPosition.y*sunPosition.y+sunPosition.z*sunPosition.z)
variable.float.sunOrMoonL=1/sqrt(sunOrMoonPosx*sunOrMoonPosx+sunOrMoonPosy*sunOrMoonPosy+sunOrMoonPosz*sunOrMoonPosz)
uniform.vec3.sunOrMoonPosN=vec3(sunOrMoonPosx*sunOrMoonL, sunOrMoonPosy*sunOrMoonL, sunOrMoonPosz*sunOrMoonL)
uniform.vec3.sunPosN=vec3(sunPosition.x*sunL, sunPosition.y*sunL, sunPosition.z*sunL)
uniform.float.isOutdoorsSmooth=smooth(if(eyeBrightness.y > 50, 1, 0), 10, 10)
uniform.float.precipitationSmooth=smooth(biome_precipitation, 150, 150)
uniform.float.fogAmount=(0.5 + sunriseStrength + nightStrength + smooth(if(biome == BIOME_PALE_GARDEN && nightStrength > 0.99, 50, temperature), 10, 10) + rainStrength + thunderStrength) * isOutdoorsSmooth * ATM_FOG_STRENGTH
